# stack canary

{% embed url="https://ctf101.org/binary-exploitation/stack-canaries/" %}

A secret value placed on the stack (typicallly between the function's local variables and the stored return address) which changes every time the program is started

* before a function returns, this value will be checked, and if modified, this means that a stack overflow has occurred, and the program will exit immediately
* this prevents buffer overflow attacks which attempts to overwrite the return address memory value

**Eg. In a C code**

```c
// retrieve stack canary value
local_10 = *(long *)(in_FS_OFFSET + 0x28);

// ...

// check stack canary value
if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
        /* WARNING: Subroutine does not return */
        __stack_chk_fail();
    }
```



