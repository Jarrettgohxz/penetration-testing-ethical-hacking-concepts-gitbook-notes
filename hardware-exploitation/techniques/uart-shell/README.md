# UART shell

{% embed url="https://tcm-sec.com/getting-started-with-iot-hardware-hacking-uart/" %}

Most hardware devices exposes a "debug interface" shell via a UART port. This can allow us to gain access to a configured shell on the device, and my directly provide us with root access at times.

## 1. Identify Ground points

The first and most important step will be to identify the Ground (GND) points (apart from the one on the UART interface). For this, we need a digital multimeter with the _continuity mode_ function

> **IMPORTANT**: **NEVER** use the _continuity mode_ on a powered board

1. Turn the digital multimeter to continuity mode ![](<../../../.gitbook/assets/image (4).png>)



2. Touch both probes (**black** and **red** probes connected to **COM** and **mAΩA** respectively)

> The middle and right slots in the image below

<div align="left"><figure><img src="../../../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure></div>

* “Beep” sound should be heard



3. <mark style="color:red;">**\*\***</mark>Turn **OFF** the power source to the board/device



4. Identify potential Ground points

* Pin labels with “GND” or “0V”
* "metal shielded" components&#x20;
  * USB&#x20;
  * Any other components with visible silver metal casing

> In the image below, we can see silver metal casing on the left and right middle of the board (circled with blue outline)

<figure><img src="../../../.gitbook/assets/image (101).png" alt=""><figcaption></figcaption></figure>

* The component on the left is likely an Electromagnetic Interference (EMI) shield around a Wi-Fi chip or something similar, while the one on the right is USB



5. Touch both probes to 2 different potential Ground points

* If a “Beep” is heard -> both are Ground points

## 2. Identify UART interface

We can use the following methods to find potential UART interface candidates:

**a. Labels on the hardware itself**

* "UART"
* "TX RX GND VCC"

<figure><img src="../../../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption><p>image from tcm-sec.com</p></figcaption></figure>

**b. Visual appearance**

If there are no obvious labels on the device, we can still identify an UART interface by observing the following patterns

* 4-5 gold-plated _**hole**_ or _**oval/circular shaped**_ portions aligned in a neat row

<figure><img src="../../../.gitbook/assets/image (1) (1) (1).png" alt=""><figcaption></figcaption></figure>



<figure><img src="../../../.gitbook/assets/image (99).png" alt=""><figcaption><p><a href="https://www.youtube.com/watch?v=R82pt4rLhBQ">https://www.youtube.com/watch?v=R82pt4rLhBQ</a></p></figcaption></figure>

## 3. Identifying GND, TX, RX pins on the UART&#x20;

After finding a potential UART candidate, we have to identify the TX, RX and GND pins to enable us to provide proper connections with our external adapter that connects to our computer, and to also prevent frying the components on the board

For the steps below, place the black (connected to **COM**) on the Ground point found earlier. Switch multimeter to continuity mode ![](<../../../.gitbook/assets/image (4).png>)

**a. GND**

* The first step will be to identify the GND on the UART
* With the black probe inserted into the **COM** on the multimeter, place the red probe (connected to **mAΩA**) on each of the UART pins
  * The GND pin can be identified when a "beep" sound is heard

For the TX and RX pins, we have to switch the multimeter to DC voltage mode ![](<../../../.gitbook/assets/image (103).png>). Place the red probe (connected to **COM**) on the rest of the unidentified pins&#x20;

We can identify the specific pins based on the value shown on the digital multimeter as described below:

**a. TX**

* Fluctuating voltage value in the range of 2+V to 3.3V

**b. RX**

* Stable voltage value of around 3.3V
* Generally, the RX stays high by default, while waiting for an external device

## 4. Getting a shell

```shellscript
$ 
```



