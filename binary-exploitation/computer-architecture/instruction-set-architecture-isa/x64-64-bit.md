# x64/(64-bit)

{% embed url="https://wiki.osdev.org/CPU_Registers_x86-64" %}

{% embed url="https://web.stanford.edu/class/archive/cs/cs107/cs107.1202/guide/x86-64.html" %}

[https://cs.brown.edu/courses/cs033/docs/guides/x64\_cheatsheet.pdf](https://cs.brown.edu/courses/cs033/docs/guides/x64_cheatsheet.pdf)

> x64 also known as x86-64, AMD64 or Intel 64 is the 64-bit architecture.

### 1. Little Endian

* The least significant byte is stored at the lowest address, and the most signifcant byte is stored at the highest address

Eg. Suppose we want to store `0x44332211` in memory. In this case `0x11` is the least significant byte portion, while `0x44` is the most significant byte:

> Image taken directly from [source](https://textbook.cs161.org/memory-safety/x86.html)

![](https://jarrettgxz-sec.gitbook.io/penetration-testing-ethical-hacking-concepts/~gitbook/image?url=https%3A%2F%2F667177664-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FMsAGomcNx5xaB1xFygc9%252Fuploads%252FQeDvgL5CU5LQNEixzsds%252Fimage.png%3Falt%3Dmedia%26token%3Dbd8a3fea-3843-4dce-9486-5befedfd2c71\&width=768\&dpr=4\&quality=100\&sign=ccd31f37\&sv=2)

### 2. Stack grows toward lower memory addresses

### 3. Registers

**3.1 Special registers**

a. `RIP`: Register Instruction Pointer

* Stores the address of the current machine instruction

b. `RBP`: Register Base Pointer

* Stores the address of the higher address of the current stack frame
  * This can be the top or bottom of the stack layout when drawn visually (depending on the on how it is drawn)
* Used to create a stable reference point
  * used as an offset to reference local variables

c. `RSP`: Register Stack Pointer

* Stores the address of the lower address of the current stack frame
  * This can be the top or bottom of the stack layout when drawn visually (depending on the on how it is drawn)

**3.2 General-purpose registers**

> **caller-save/callee-owned:** values are **NOT** necessarily saved across functions
>
> **caller-owned/callee-save**: values are saved across functions

a. `rax` (_callee-owned/caller-save_)

* Return value from function&#x20;

b. `rdi`, `rsi`, `rdx`, `rcx`, `r8`, `r9` (_callee-owned/caller-save_)

* 1st to 6th argument (integer/pointer parameter) to called functions
