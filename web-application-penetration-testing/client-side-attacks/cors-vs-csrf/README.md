# CORS vs CSRF

> Essentially, CORS and CSRF works based on using existing tokens or cookies on a user browser to make request to the target address where these credential can be used. The difference is that CORS (enforced by web browsers) defends against Javascript execution on the data, while CSRF attempts to invoke a state change.

|                                    | CORS                                                                                                                                                                                   | CSRF                                                                                                                                                                                                                                                        |
| ---------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Scenario**                       | A malicious website attempts to exploit the trust from the browser to use the existing cookies for a target address (eg. _**bank.com, admin.target.com**_) to retrieve sensitive data. | A malicious website attempts to exploit the trust from the browser to use the existing cookies for a target address (eg. _**bank.com, admin.target.com**_)  to send a request to that target address to cause a state change or perform unintended actions  |
| **Relies on**                      | Misconfigured or overly permissive `Access-Control-Allow-Origin` response headers from server                                                                                          | Missing CSRF token                                                                                                                                                                                                                                          |
| **Purpose of attack**              | Steal sensitive data from a target resource, that can be exfiltrated via Javascript                                                                                                    | Trick a server into performing an action on behalf of the real user                                                                                                                                                                                         |
| **Browser defense mechanism**      | Allow requests, but blocks Javascript from processing the response (eg. to exfiltrate data).                                                                                           | <mark style="color:red;">**CSRF protection is not enforced on the client side**</mark>                                                                                                                                                                      |
| **Server defense mechanism**       | <mark style="color:red;">**CORS protection is not enforced on the server side**</mark>                                                                                                 | Server validates the CSRF token to ensure that it matches the one generated for the client. Only the real client-side code will have the valid CSRF token.                                                                                                  |
| **Effects of a successful attack** | Sensitive data exposure                                                                                                                                                                | Unintended actions taken on behalf of a user (eg. transfer money, update passwords, etc.)                                                                                                                                                                   |

